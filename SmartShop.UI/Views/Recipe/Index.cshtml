@model string

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Details</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
            text-align: center;
        }

        #recipe-container {
            max-width: 800px;
            margin: auto;
        }

        .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .col {
            flex: 0 0 48%; /* Adjust the width as needed */
        }

        img {
            max-width: 100%;
            height: auto;
        }

        #ingredients-list {
            list-style-type: none;
            padding: 0;
        }

        .button {
            width: 50px;
            height: 25px;
        }
    </style>
</head>
<body>
    <header>
        <h1 style="text-align: center;">Recipes</h1>
    </header>
    <br /><br />
    <div id="recipe-div" class="recipe-container">
    </div>
    <script>
        // Extract data from the provided JSON
        const recipeResults = @Html.Raw(Model);

        // Iterate through the recipes array
        for (let i = 0; i < recipeResults.recipes.length; i++) {
            let recipe = recipeResults.recipes[i];

            // Create a new row container for every two recipes
            if (i % 2 === 0) {
                var recipeRow = document.createElement('div');
                recipeRow.classList.add('row');
            }

            // Create a column for each recipe
            var recipeCol = document.createElement('div');
            recipeCol.classList.add('col');

            // Display recipe details for each recipe
            let recipeContainer = document.createElement('div');
            recipeContainer.classList.add('recipe-container');

            let imageElement = document.createElement('img');
            imageElement.src = recipe.image;

            let titleElement = document.createElement('h2');
            titleElement.textContent = recipe.title;

            // Create view button for each recipe
            var viewRecipe = document.createElement('button');
            viewRecipe.textContent = "VIEW";
            viewRecipe.classList.add("btn");
            viewRecipe.classList.add("btn-outline-primary");

            // Add an event listener to the button
            viewRecipe.addEventListener('click', function () {
                // Handle the button click event here
                console.log('Button clicked for recipe:', recipe.title);
                
                // Construct the URL dynamically with the encoded recipe as a query parameter
                var url = '@Url.Action("ViewRecipe", "Recipe")' + '?id=' + recipe.id;

                console.log(url);
                // Open a new window/tab with the constructed URL
                window.open(url, '_blank');
            });

            // Create button for each recipe
            var addRecipe = document.createElement('button');
            addRecipe.textContent = "ADD";

            // Add an event listener to the button
            addRecipe.addEventListener('click', function () {
                // Handle the button click event here
                console.log('Button clicked for recipe:', recipe.title);
                // You can add your logic to handle the button click event
            });

            // Append title and image elements to the container
            recipeCol.appendChild(imageElement);
            recipeCol.appendChild(titleElement);
            recipeCol.appendChild(viewRecipe);
            recipeCol.appendChild(addRecipe);

            // Append the column to the current row
            recipeRow.appendChild(recipeCol);

            // Append the row to the recipe container
            document.getElementById("recipe-div").appendChild(recipeRow);
        }

    </script>
</body>
</html>